# Backend Configuration - Yana.Diia.AI
# BFF (Backend for Frontend) Architecture
# КОПІЮВАТИ до backend/.env (НЕ КОМІТИТИ!)

# ========================================
# PHASE 1: ZERO-DAY OPERATIONAL SETUP
# ========================================

# === Environment ===
NODE_ENV=production
LOG_LEVEL=info

# === Server Configuration ===
PORT=8000
HOST=127.0.0.1
CORS_ORIGINS=http://localhost:3000,https://yana-diia-v3.vercel.app

# ========================================
# PHASE 2: DUAL-LLM CONFIGURATION
# ========================================

# === Generator Module (Local Ollama) ===
# Швидкий, економічний - для чорнових робіт
OLLAMA_HOST_GENERATOR=http://127.0.0.1:11434
LLM_MODEL_GENERATOR=llama3.1
GENERATOR_TEMPERATURE=0.7
GENERATOR_MAX_TOKENS=2000

# === Judge Module (Cloud - OpenAI GPT-4) ===
# Потужний, точний - для валідації та оцінки
OPENAI_API_KEY_JUDGE=sk-proj-ВАШІ_СПРАВЖНІ_КЛЮЧІ_СЮДИ
LLM_ENDPOINT_JUDGE=https://api.openai.com/v1/chat/completions
LLM_MODEL_JUDGE=gpt-4-turbo
JUDGE_TEMPERATURE=0.1
JUDGE_MAX_TOKENS=1500

# Alternative: Claude (Anthropic)
# ANTHROPIC_API_KEY=sk-ant-ВАШІ_КЛЮЧІ_СЮДИ
# LLM_MODEL_JUDGE=claude-3-opus-20240229

# === RAG Configuration (Weaviate) ===
# Векторна БД для Diia Design System контексту
WEAVIATE_URL=http://127.0.0.1:8080
WEAVIATE_API_KEY=  # Optional for local deployment
WEAVIATE_SCHEME=http

# RAG Collection Names
RAG_COLLECTION_FLOWS=DiiaFlows
RAG_COLLECTION_COMPONENTS=DiiaComponents
RAG_COLLECTION_API_MOCK=APIMock

# ========================================
# PHASE 3: DIIA INTEGRATION
# ========================================

# === Ukrainian LLM (Lapa) - Optional ===
HUGGINGFACE_API_TOKEN=hf_ВАШІ_КЛЮЧІ_СЮДИ
LAPA_MODEL_ID=lapa-ai/lapa-7b
LAPA_MAX_LENGTH=2048
LAPA_TEMPERATURE=0.8

# === Mock Registries Configuration ===
# Для Demo Day використовуємо mock-дані
USE_MOCK_REGISTRIES=true
MOCK_REGISTRY_EDR=true
MOCK_REGISTRY_TAX=true
MOCK_REGISTRY_SOCIAL=true
MOCK_REGISTRY_VEHICLE=true
MOCK_REGISTRY_LAND=true

# === Diia Deep Links ===
DIIA_DEEPLINKS_CONFIG=config/diia-deeplinks.json
DIIA_API_HUB_URL=https://api.diia.gov.ua

# ========================================
# JUDGE SCORING CONFIGURATION
# Diia Flow Scoring Rubric Weights
# ========================================

# Component Compliance (40%) - Чи всі компоненти з Diia Design System?
SCORING_COMPONENT_COMPLIANCE_WEIGHT=0.40

# Flow Length (30%) - Чи флоу мінімально короткий?
SCORING_FLOW_LENGTH_WEIGHT=0.30

# API Dependency (30%) - Чи використовуються API замість ручного вводу?
SCORING_API_DEPENDENCY_WEIGHT=0.30

# Penalty coefficients
PENALTY_CUSTOM_COMPONENT=15  # Штраф за кожен кастомний компонент
PENALTY_REDUNDANT_STEP=10    # Штраф за кожен зайвий крок
PENALTY_MANUAL_INPUT=20      # Штраф за ручне введення даних (доступних через API)

# ========================================
# SECURITY
# ========================================

SECRET_KEY=demo-day-secret-change-for-production-minimum-32-characters
ALLOWED_HOSTS=localhost,127.0.0.1,yana-diia-v3.vercel.app
ENABLE_HTTPS=false

# ========================================
# MONITORING (Optional)
# ========================================

SENTRY_DSN=
ENABLE_METRICS=false
LOG_FILE_PATH=logs/yana-backend.log

# ========================================
# DEVELOPER MODE
# ========================================

# Debug options
DEBUG_MODE=false
VERBOSE_LOGGING=false
MOCK_SLOW_API_DELAY=0  # Milliseconds (для тестування)

# Cache settings
ENABLE_RESPONSE_CACHE=true
CACHE_TTL_SECONDS=300
